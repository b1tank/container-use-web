{"openapi":"3.1.0","info":{"title":"Container Use UI API","version":"1.0.0"},"components":{"schemas":{"Environment":{"type":"object","properties":{"id":{"type":"string","example":"sharing-loon"},"title":{"type":"string","example":"Flask Hello World App"},"created":{"type":"string","example":"1 month ago"},"updated":{"type":"string","example":"1 week ago"}},"required":["id","title","created","updated"]},"EnvironmentList":{"type":"array","items":{"$ref":"#/components/schemas/Environment"}},"Error":{"type":"object","properties":{"error":{"type":"string","example":"Failed to fetch environments"},"details":{"type":"object","properties":{"exitCode":{"type":"number"},"stderr":{"type":"string"},"command":{"type":"string"},"cwd":{"type":"string"}},"required":["exitCode","stderr","command","cwd"]}},"required":["error"]},"EnvironmentLogs":{"type":"object","properties":{"environmentId":{"type":"string","example":"sharing-loon"},"logs":{"type":"string","example":"8a9d3a6  Creating a README file with instructions for running the Flask app (77 seconds ago)\nWrite README.md\n\n$ python app.py &"},"timestamp":{"type":"string","example":"2025-07-31T10:30:00Z"}},"required":["environmentId","logs","timestamp"]},"EnvironmentDiff":{"type":"object","properties":{"environmentId":{"type":"string","example":"sharing-loon"},"diff":{"type":"string","example":"diff --git a/README.md b/README.md\nindex e69de29..2a65c16 100644\n--- a/README.md\n+++ b/README.md\n@@ -0,0 +1,27 @@"},"timestamp":{"type":"string","example":"2025-07-31T10:30:00Z"}},"required":["environmentId","diff","timestamp"]}},"parameters":{}},"paths":{"/api/v1/environments":{"get":{"parameters":[{"schema":{"type":"string","example":"/Users/b1tank/hello","description":"Working folder for the CLI command"},"required":false,"description":"Working folder for the CLI command","name":"folder","in":"query"},{"schema":{"type":"string","example":"/Users/b1tank/container-use/container-use","description":"Path to the container-use CLI"},"required":false,"description":"Path to the container-use CLI","name":"cli","in":"query"}],"responses":{"200":{"description":"List of environments","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnvironmentList"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api/v1/environments/{id}/logs":{"get":{"parameters":[{"schema":{"type":"string","example":"sharing-loon","description":"Environment ID"},"required":true,"description":"Environment ID","name":"id","in":"path"},{"schema":{"type":"string","example":"/Users/b1tank/hello","description":"Working folder for the CLI command"},"required":false,"description":"Working folder for the CLI command","name":"folder","in":"query"},{"schema":{"type":"string","example":"/Users/b1tank/container-use/container-use","description":"Path to the container-use CLI"},"required":false,"description":"Path to the container-use CLI","name":"cli","in":"query"}],"responses":{"200":{"description":"Environment logs","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnvironmentLogs"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api/v1/environments/{id}/diff":{"get":{"parameters":[{"schema":{"type":"string","example":"sharing-loon","description":"Environment ID"},"required":true,"description":"Environment ID","name":"id","in":"path"},{"schema":{"type":"string","example":"/Users/b1tank/hello","description":"Working folder for the CLI command"},"required":false,"description":"Working folder for the CLI command","name":"folder","in":"query"},{"schema":{"type":"string","example":"/Users/b1tank/container-use/container-use","description":"Path to the container-use CLI"},"required":false,"description":"Path to the container-use CLI","name":"cli","in":"query"}],"responses":{"200":{"description":"Environment diff","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnvironmentDiff"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api/v1/files":{"get":{"parameters":[{"schema":{"type":"string","example":"/Users/b1tank/hello","description":"Folder path to list. Defaults to home folder if not provided"},"required":false,"description":"Folder path to list. Defaults to home folder if not provided","name":"path","in":"query"}],"responses":{"200":{"description":"Folder listing","content":{"application/json":{"schema":{"type":"object","properties":{"path":{"type":"string","description":"Current folder path","example":"/Users/b1tank/hello"},"items":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","description":"Name of the file or folder","example":"main.go"},"path":{"type":"string","description":"Full path to the file or folder","example":"/Users/b1tank/hello/README.md"},"type":{"type":"string","enum":["file","folder"],"description":"Type of the entry","example":"file"},"size":{"type":"number","description":"Size of the file in bytes (only for files)","example":1024},"modified":{"type":"string","description":"Last modified timestamp","example":"2023-01-01T00:00:00Z"}},"required":["name","path","type"]},"description":"List of files and directories in the current path"},"parent":{"type":"string","nullable":true,"description":"Parent folder path, null if at root","example":"/Users/john"}},"required":["path","items","parent"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api/v1/git":{"get":{"parameters":[{"schema":{"type":"string","minLength":1,"example":"/Users/b1tank/hello","description":"Folder path to get git information for"},"required":true,"description":"Folder path to get git information for","name":"folder","in":"query"}],"responses":{"200":{"description":"Git repository information","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Whether the operation was successful"},"data":{"type":"object","properties":{"currentBranch":{"type":"string","example":"main","description":"Current branch name"},"isRepository":{"type":"boolean","example":true,"description":"Whether the folder is a git repository"},"hasUncommittedChanges":{"type":"boolean","example":false,"description":"Whether there are uncommitted changes"},"branches":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","example":"main","description":"Branch name"},"current":{"type":"boolean","example":true,"description":"Whether this is the current branch"},"remote":{"type":"boolean","example":false,"description":"Whether this is a remote branch"},"upstream":{"type":"string","example":"origin/main","description":"Upstream branch name"},"ahead":{"type":"number","example":2,"description":"Number of commits ahead of upstream"},"behind":{"type":"number","example":0,"description":"Number of commits behind upstream"},"commitHash":{"type":"string","example":"a1b2c3d","description":"Short commit hash"},"commitMessage":{"type":"string","example":"Add new feature","description":"Commit message (truncated)"},"trackingStatus":{"type":"string","example":"gone","description":"Tracking status (gone, up to date, etc.)"}},"required":["name","current","remote"]},"description":"List of all branches"}},"required":["currentBranch","isRepository","hasUncommittedChanges","branches"],"description":"Git repository information"}},"required":["success","data"]}}}},"404":{"description":"Folder not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api/v1/git/checkout":{"post":{"parameters":[{"schema":{"type":"string","minLength":1,"example":"/Users/b1tank/hello","description":"Folder path for git operations"},"required":true,"description":"Folder path for git operations","name":"folder","in":"query"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"branch":{"type":"string","example":"main","description":"Branch name to checkout"}},"required":["branch"]}}}},"responses":{"200":{"description":"Git checkout result","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Whether the checkout was successful"},"message":{"type":"string","example":"Successfully checked out branch: main","description":"Success or error message"},"data":{"type":"object","properties":{"currentBranch":{"type":"string","example":"main","description":"Current branch name"},"isRepository":{"type":"boolean","example":true,"description":"Whether the folder is a git repository"},"hasUncommittedChanges":{"type":"boolean","example":false,"description":"Whether there are uncommitted changes"},"branches":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","example":"main","description":"Branch name"},"current":{"type":"boolean","example":true,"description":"Whether this is the current branch"},"remote":{"type":"boolean","example":false,"description":"Whether this is a remote branch"},"upstream":{"type":"string","example":"origin/main","description":"Upstream branch name"},"ahead":{"type":"number","example":2,"description":"Number of commits ahead of upstream"},"behind":{"type":"number","example":0,"description":"Number of commits behind upstream"},"commitHash":{"type":"string","example":"a1b2c3d","description":"Short commit hash"},"commitMessage":{"type":"string","example":"Add new feature","description":"Commit message (truncated)"},"trackingStatus":{"type":"string","example":"gone","description":"Tracking status (gone, up to date, etc.)"}},"required":["name","current","remote"]},"description":"List of all branches"}},"required":["currentBranch","isRepository","hasUncommittedChanges","branches"],"description":"Updated git repository information"}},"required":["success","message"]}}}},"400":{"description":"Bad request (not a git repository or uncommitted changes)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api/v1/git/log":{"get":{"parameters":[{"schema":{"type":"string","minLength":1,"example":"/Users/b1tank/hello","description":"Folder path for git operations"},"required":true,"description":"Folder path for git operations","name":"folder","in":"query"},{"schema":{"type":"string","minLength":1,"example":"main","description":"Branch name to get log for"},"required":true,"description":"Branch name to get log for","name":"branch","in":"query"},{"schema":{"type":"string","example":"10","description":"Number of commits to retrieve (default: 10)"},"required":false,"description":"Number of commits to retrieve (default: 10)","name":"limit","in":"query"}],"responses":{"200":{"description":"Git log result","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Whether the operation was successful"},"data":{"type":"object","properties":{"branch":{"type":"string","example":"main","description":"Branch name"},"commits":{"type":"array","items":{"type":"object","properties":{"hash":{"type":"string","example":"a1b2c3d","description":"Commit hash (short)"},"message":{"type":"string","example":"Add new feature","description":"Commit message"},"author":{"type":"string","example":"John Doe","description":"Commit author"},"date":{"type":"string","example":"2024-01-01T12:00:00Z","description":"Commit date in ISO format"},"relative":{"type":"string","example":"2 hours ago","description":"Relative time from now"}},"required":["hash","message","author","date","relative"]},"description":"List of recent commits"}},"required":["branch","commits"],"description":"Git log information for a branch"}},"required":["success","data"]}}}},"400":{"description":"Bad request (not a git repository or branch not found)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}}}}
